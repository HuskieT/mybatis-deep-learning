# 数据库结构优化

## 1 数据库结构优化介绍

优化目的：
【1】减少数据冗余
【2】尽量避免数据维护中出现更新 、插入和删除异常
     插入异常：如果表中的某个实体随着另外一个实体而存在
     更新异常：如果更改表中的某个实体的单独属性时，需要对多行进行更新
     删除异常：如果删除表中的某一实体则会导致其他实体的消失  
【3】节约数据存储空间
【4】提高查询效率

## 2 数据库机构设计的步骤

【1】需求分析： 
    存储要求
    数据处理需求
    数据的安全性和完整性
【2】 逻辑设计：
    设计数据的逻辑存储结构
    数据实体之间的逻辑关系，解决数据冗余和数据维护异常
【3】物理设计：
    关系型数据库
    非关系型数据库   
【4】 维护优化：
    根据实际情况对索引、存储结构等进行优化
       
 ## 3 数据库设计范式 （视频4-2）
 
 【1】第一范式  
      数据库表中的所有字段都只具有单一属性
      单一属性的列是由基本的数据类型所构成的
      设计出来的表都是简单的二维表
 【2】第二范式  
        符合第一范式
        要求一个表中只有一个业务主键
        
 【3】第三范式       
        符合第二范式
        指每一个非主属性既不部分依赖于也不传递依赖于业务主键

 ## 4  数据类型选择

【1】 当一个列可以选择多个数据类型时优先选择数字类型，其次是日期或二进制类型，最后是字符类型
【2】整数类型
tinyint    存储空间：1字节   取值范围   （unsigned） 0-255
smallint   存储空间：2字节   取值范围   （unsigned） 0-65535
mediumint  存储空间：3字节   取值范围   （unsigned） 0-16777215
int        存储空间：4字节   取值范围   （unsigned） 0-429497295
bigint     存储空间：8字节   取值范围   （unsigned）  
【3】实数类型

float       4个字节                                是否为精准类型（否）
double      8个字节                                是否为精准类型（否）
decimal     每4个字节存9个数字，小数点占一个字节   是否为精准类型（是）

财务数据需要使用 decimal 类型

【4】varchar  与 char （计算长度都是用 字符不用字节）
特别长的用text存储

varchar特点：
varchar 用于存储变长字符串，只占用必要的存储空间

列的最大长度小于255 则只占用一个额外字节用于记录字符串长度
列的最大长度大于255 则只占用两个额外字节用于记录字符串长度

char特点：

char类型时定长的
字符串存储在CHAR类型的列中会删除末尾的空格
char类型的最大宽度为255

适合 固定长度的值（列如：身份证   密码  id 等）
存储短字符串

【5】dateTIme 与 timestamp

dateTIme 类型  以YYYY-MM-DD  HH:MM:SS 格式存储
dateTIme类型与时区无关，只占8个字节的存储空间 时间范围 1000-01-01 00:00:00 到9999-12-31 23:59:59

timestamp 存储格林尼治时间1970 年1月1日 到当前时间的秒数 以YYYY-MM-DD  HH:MM:SS 的格式显示 占4个字节（以int存储）
时间范围 1970-01-01  到  2038-01-19
timestamp 类型显示依赖于所指定的时区
 
【6】date 与 time （mysql 5.7 及以后）

date 类型只需要3个字节
date 类型可以利用日期时间函数进行日志的计算
存储范围： 1000-01-01  到9999-12-31 

time 类型 （存储 时分秒）

【7】业务主键 与 innodb主键
 















